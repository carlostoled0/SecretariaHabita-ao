
<!doctype html>
<html lang=pt-br>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Painel Principal - Canal</title>
<link href=https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css rel=stylesheet>
<script src=https://cdn.jsdelivr.net/npm/chart.js></script>
</head>
<body class="bg-gray-100 text-gray-800">
<header class="bg-white shadow">
<div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
<h1 class="text-xl font-bold text-blue-600">ğŸ“Š Painel de AnÃ¡lise</h1>
<nav class=space-x-4>
<a href=index.html class="text-blue-600 hover:underline">ğŸ  InÃ­cio</a>
<a href=inscritos.html class="text-blue-600 hover:underline">ğŸ“ˆ Inscritos</a>
<a href=visualizacoes.html class="text-blue-600 hover:underline">ğŸ“Š VisualizaÃ§Ãµes</a>
<a href=videos.html class="text-blue-600 hover:underline">ğŸ¬ VÃ­deos</a>
<a href=video.html class="text-blue-600 hover:underline">ğŸ¥ AnÃ¡lise de VÃ­deos</a>
<a href=roteiro.html class="text-blue-600 hover:underline">ğŸ“ RoteirizaÃ§Ã£o</a>
<a href=ao-vivo.html class="text-blue-600 hover:underline">ğŸ”´ Ao Vivo</a>
<a href=publicidade.html class="text-blue-600 hover:underline">ğŸ’¼ Publicidade</a>
</nav>
</div>
</header>
<main class="max-w-6xl mx-auto p-6 space-y-8">
<section>
<h2 class="text-lg font-semibold text-gray-700">Canal em anÃ¡lise:</h2>
<p id=canalInfo class="text-blue-500 font-mono">Carregando...</p>
</section>
<section>
<h2 class="text-lg font-semibold text-gray-700">ğŸ“ˆ EvoluÃ§Ã£o de VisualizaÃ§Ãµes</h2>
<canvas id=chartViews></canvas>
</section>
</main>

<script>
  document.addEventListener("DOMContentLoaded", async function () {
    const url = localStorage.getItem("canal_jairinho_url") || "https://www.youtube.com/@FalaJairinho";
    const canalInput = url.includes("@") ? url.split("@")[1] : url.split("/").pop();
    const apiKey = "AIzaSyCD27OXrL7tmgDxOg7wQLR5QmRUGJPsqFg";

    try {
      // 1. Buscar channelId real usando search
      const busca = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=@${canalInput}&type=channel&key=${apiKey}`);
      const buscaJson = await busca.json();
      const channelId = buscaJson.items?.[0]?.snippet?.channelId || buscaJson.items?.[0]?.id?.channelId;

      if (!channelId) {
        document.getElementById("canalInfo").innerText = "Canal nÃ£o encontrado.";
        return;
      }

      // 2. Buscar estatÃ­sticas reais do canal
      const res = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${channelId}&key=${apiKey}`);
      const json = await res.json();
      const canal = json.items?.[0];

      if (canal) {
        const stats = canal.statistics;
        document.getElementById("canalInfo").innerHTML = `
          <strong>@${canalInput}</strong><br/>
          ğŸ‘¥ ${parseInt(stats.subscriberCount).toLocaleString()} inscritos<br/>
          ğŸ‘ï¸ ${parseInt(stats.viewCount).toLocaleString()} visualizaÃ§Ãµes<br/>
          ğŸ¬ ${parseInt(stats.videoCount).toLocaleString()} vÃ­deos
        `;
      } else {
        document.getElementById("canalInfo").innerText = "Erro ao buscar estatÃ­sticas.";
      }
    } catch (error) {
      document.getElementById("canalInfo").innerText = "Erro ao conectar Ã  API.";
    }
  });
</script>


<script>
  document.addEventListener("DOMContentLoaded", async function () {
    const url = localStorage.getItem("canal_jairinho_url") || "https://www.youtube.com/@FalaJairinho";
    const canalInput = url.includes("@") ? url.split("@")[1] : url.split("/").pop();
    const apiKey = "AIzaSyCD27OXrL7tmgDxOg7wQLR5QmRUGJPsqFg";

    try {
      // 1. Buscar channelId real usando search
      const busca = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=@${canalInput}&type=channel&key=${apiKey}`);
      const buscaJson = await busca.json();
      const channelId = buscaJson.items?.[0]?.snippet?.channelId || buscaJson.items?.[0]?.id?.channelId;

      if (!channelId) {
        document.getElementById("canalInfo").innerText = "Canal nÃ£o encontrado.";
        return;
      }

      // 2. Buscar estatÃ­sticas reais do canal
      const res = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${channelId}&key=${apiKey}`);
      const json = await res.json();
      const canal = json.items?.[0];

      if (canal) {
        const stats = canal.statistics;
        document.getElementById("canalInfo").innerHTML = `
          <strong>@${canalInput}</strong><br/>
          ğŸ‘¥ ${parseInt(stats.subscriberCount).toLocaleString()} inscritos<br/>
          ğŸ‘ï¸ ${parseInt(stats.viewCount).toLocaleString()} visualizaÃ§Ãµes<br/>
          ğŸ¬ ${parseInt(stats.videoCount).toLocaleString()} vÃ­deos
        `;
      } else {
        document.getElementById("canalInfo").innerText = "Erro ao buscar estatÃ­sticas.";
      }
    } catch (error) {
      document.getElementById("canalInfo").innerText = "Erro ao conectar Ã  API.";
    }
  });
</script>

</body>
</html>
